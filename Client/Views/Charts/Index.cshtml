@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/AdminLTELayout/AdminLTELayout.cshtml";
}
@*<style>
    body {
        display: none;
    }
</style>*@
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>
@*<style>
    .hidden {
        display: none;
    }
</style>

<script>
    // Fungsi untuk memeriksa sesi dan menampilkan konten utama setelahnya
    function checkSessionAndShowContent() {
        const userToken = sessionStorage.getItem('userToken');
        if (!userToken) {
            // Session tidak ada, arahkan ke halaman login
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Please login first...!',
                showConfirmButton: false,
                timer: 2000,
                didClose: () => {
                    window.location.href = "/login/index";
                }
            });
            return;
        }

        // Konten utama
        document.getElementById('main-content').classList.remove('hidden');
    }

    // Panggil fungsi checkSessionAndShowContent setelah halaman dimuat
    window.addEventListener('DOMContentLoaded', checkSessionAndShowContent);
</script>
*@

<!-- Konten utama -->
<div id="main-content" class="hidden">
    <!-- Isi konten utama di sini -->
</div>

<!-- Content Header (Page header) -->
<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-8">
                <h1>Graph of Employee Distribution for Each Department</h1>
            </div>
            <div class="col-sm-4">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="~/departments/index">Home</a></li>
                    <li class="breadcrumb-item active">Employee Distribution</li>
                </ol>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>

<section>
    <!-- Main content -->
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <!-- /.col (RIGHT) -->
                <div class="col-md-5">
                    <!-- PIE CHART -->
                    <div class="card card-danger">
                        <div class="card-header">
                            <h3 class="card-title">Graph of Employee Distribution</h3>

                            <div class="card-tools">
                                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-tool" data-card-widget="remove">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="pieChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                </div>
                <!-- /.col (LEFT) -->
                <div class="col-md-7">
                    <!-- BAR CHART -->
                    <div class="card card-success">
                        <div class="card-header">
                            <h3 class="card-title">Graph of Employee Distribution</h3>

                            <div class="card-tools">
                                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-tool" data-card-widget="remove">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="chart">
                                <canvas id="barChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->


                </div>
                <!-- /.col (RIGHT) -->
            </div>
            <!-- /.row -->
        </div><!-- /.container-fluid -->
    </section>
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-8">
                    <h1>Graph of Employee Gender Distribution</h1>
                </div>

            </div>
        </div><!-- /.container-fluid -->
    </section>
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <!-- /.col (RIGHT) -->
                <div class="col-md-5">
                    <!-- PIE CHART -->
                    <div class="card card-danger">
                        <div class="card-header">
                            <h3 class="card-title">Graph of Employee Gender Distribution</h3>

                            <div class="card-tools">
                                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-tool" data-card-widget="remove">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="pieChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                </div>
                <!-- /.col (LEFT) -->
                <div class="col-md-7">
                    <!-- BAR CHART -->
                    <div class="card card-success">
                        <div class="card-header">
                            <h3 class="card-title">Graph of Employee Gender Distribution in Each Department</h3>

                            <div class="card-tools">
                                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-tool" data-card-widget="remove">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="chart">
                                <canvas id="barChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->


                </div>
                <!-- /.col (RIGHT) -->
            </div>
            <!-- /.row -->
        </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
    <!-- /.content-wrapper -->
    <footer class="main-footer">
        <strong> <a href="~/departments/index">Department Chart</a></strong>
    </footer>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Add Content Here -->
    </aside>
    <!-- /.control-sidebar -->
    <!-- ./wrapper -->
</section>

@*
@section script{

    <script>
        $(document).ready(function () {
            // Periksa apakah session ada saat halaman dimuat
            checkSession();

            // Fungsi untuk memeriksa session
            function checkSession() {
                const userToken = sessionStorage.getItem('userToken');
                if (!userToken) {
                    // Session tidak ada, arahkan ke halaman login
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Please login first...!',
                        showConfirmButton: false,
                        timer: 2000,
                        didClose: () => {
                            window.location.href = "/login/index";
                        }
                    })
                    //window.location.href = "/login/index";
                } else {
                    // Tampilkan kembali konten halaman setelah pengecekan session
                    document.body.style.display = 'block';
                }
            }
        });
    </script>
<script src="~/js/chart.js"></script>
    }
*@
@section script{
    <script src="~/js/chart.js"></script>
    }